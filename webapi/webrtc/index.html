<html>
  <head>
    <title>WebRTC Tests</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', function() {
      document.getElementById('installAppWithPerms').onclick = function() {
        var request = navigator.mozApps.install('http://mozilla.github.io/qa-testcase-data/webapi/webrtc/manifest.webapp');

        request.onsuccess = function(e) {
          console.log('Installed successfully');
        };

        request.onerror = function(err) {
          console.log('Error: ' + err.target.error.name);
        };
      };

      document.getElementById('installAppWithoutPerms').onclick = function() {
        var request = navigator.mozApps.install('http://mozilla.github.io/qa-testcase-data/webapi/webrtc/nopermissions.webapp');

        request.onsuccess = function(e) {
          console.log('Installed successfully');
        };

        request.onerror = function(err) {
          console.log('Error: ' + err.target.error.name);
        };
      };
    });
    </script>
  </head>
  <body>
    <div>
      <h3>Test Pages</h3>
      <div>
        <a href="http://mozilla.github.io/qa-testcase-data/webapi/webrtc/gum_test.html">getUserMedia Test Page</a>
      </div>
    </div>
    <div>
      <h3>Install as Hosted App with Permissions</h3>
      <input type="submit" id="installAppWithPerms" value="Install" />
    </div>
    <div>
      <h3>Install as Hosted App without Permissions</h3>
      <input type="submit" id="installAppWithoutPerms" value="Install" />
    </div>
  </body>
</html>
